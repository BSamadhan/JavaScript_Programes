<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title></title>
  <meta content="" name="description">
  <meta content="" name="keywords">

 
</head>

<body>
    
    <div class="User" id="ApiData"></div>

<script>

  // first example using all
const array = [
   fetch('https://jsonplaceholder.typicode.com/users'),
   fetch('https://jsonplaceholder.typicode.com/photos'),
   fetch('https://jsonplaceholder.typicode.com/todos'),
]

async function getData(){
  try{
      const responses = await Promise.all(array);

      const data = await Promise.all(responses.map((response)=>{
          return response.json();
      }))
      console.log(data)    
      //getApiData(data)
  }catch(e){
    //console.log("Multiple fetch failed")
  }
}
getData();

// function getApiData(data){
//     const getAlldata = data;
//     console.log(getAlldata)
//     const getData = getAlldata.map((e,i)=> {
//       return `<h3>${e.name}</h3>`
//     } )
//   document.getElementById("ApiData").innerHTML = getData;

// }


//Promise.all(array)
//.then((resp)=>{
//    Promise.all(resp.map((item)=>{
//        return item.json();
//    }))
//    .then(data => console.log(data))
//}).catch(err => console.log("Multiple Api is faild",err))



// second example using allsettled 
// const array = [
//    fetch('https://jsonplaceholder.typicode.com/users'),
//    //fetch('https://jsonplaceholder.typicode.com/photos'),
//    //fetch('https://jsonplaceholder.typicode.com/todos'),
//   //  Promise.reject(),
//   //  Promise.reject(),
//   //  Promise.reject(),
// ]

// async function getdataformserver(){
//   try{
//     let response = await Promise.allSettled(array);
//     let successArray = [];
//     response.map((obj)=>{
//       if(obj.status === "fulfilled"){
//         successArray.push(obj.value)
//       }
//     })

//     if(successArray.length === 0){
//       throw new Error("All API is faild")
//     }

//     let data = await Promise.all(successArray.map((item)=>{
//       return item.json();
//     }))
//     //console.log(data)
//   DisplayData(data);
//   }catch(e){
//     console.log(e)
//   }
// }
// getdataformserver();

// function DisplayData(data){
//   let newdata = data;
//   console.log(newdata);
//   let getdata = newdata.map((e,i)=> {
//       return `<h3>${e.name}</h3>`
//     })
//     document.getElementById("ApiData").innerHTML = getData;
// }


</script>
    
</body>

</html>